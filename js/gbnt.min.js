function initializeRouting(){Path.map("#project/:id").to(function(){_routingProj=this.params.id}),Path.listen()}function prepareProjectData(){$.get("projectos/lista_dos_projectos.txt",function(a){_projectsList=a.split(",");for(var b=0,c=0;c<_projectsList.length;c++)b+=1,b>10&&(b=1),createObject(_projectsList[c],b)})}function checkAllDone(a){for(var b=!0,c=0;c<window._projectsList.length;c++)if(a===window._projectsList[c]){window._projectsList.splice(c,1);break}for(var d=0;d<window._projectsList.length;d++)if("string"==typeof window._projectsList[d]){b=!1;break}b&&(createHTML(),correctSizes(),randomizeDIVs(),initializePackery(),createEventHandlers())}function correctSizes(){var a=$(".gbnt-item.gbnt-size-normal").width();$(".gbnt-size-normal").each(function(){$(this).height(a)}),$(".gbnt-size-wide").each(function(){$(this).height(a)}),$(".gbnt-size-tall").each(function(){$(this).height(2*a)})}function createEventHandlers(){$(".proj-cover").hover(function(){"true"!==$(this).parents(".gbnt-item").attr("data-gbnt-checked")&&$(this).fadeTo(100,0)},function(){"true"!==$(this).parents(".gbnt-item").attr("data-gbnt-checked")&&$(this).fadeTo(100,1)}),$(".proj-text").hover(function(){$(this).fadeTo(100,1)},function(){$(this).fadeTo(100,0)}),$(".gbnt-item").on("click",function(a){a.preventDefault(),"cover"===event.srcElement.id&&openProject(this)}),$(".proj-profile .btn-close").on("click",function(a){a.preventDefault();var b=$(this).parents(".gbnt-item");closeProject(b)}),$(".proj-profile .btn-author").on("click",function(a){a.preventDefault(),$(this).siblings(".btn-project").toggleClass("btn-selected"),$(this).toggleClass("btn-selected"),$(this).parent().siblings(".tab-project").toggle(),$(this).parent().siblings(".tab-author").toggle()}),$(".proj-profile .btn-project").on("click",function(a){a.preventDefault(),$(this).siblings(".btn-author").toggleClass("btn-selected"),$(this).toggleClass("btn-selected"),$(this).parent().siblings(".tab-project").toggle(),$(this).parent().siblings(".tab-author").toggle()}),$(document).keyup(function(a){27===a.keyCode&&$(".gbnt-item").each(function(){return"true"===$(this).attr("data-gbnt-checked")?(closeProject(this),void _packeryContainer.packery()):void 0})})}function openProject(a){var b=$(a).width();$(a).attr("data-gbnt-checked","true"),$(".gbnt-item").each(function(){$(this).addClass("no-pointers")}),$(a).find(".proj-cover").hide(),$(a).find(".proj-text").hide(),$(a).find(".proj-img").hide(),$(a).addClass("selected-project"),$(a).height(4*b),$(a).find(".proj-profile").removeClass("hide-me"),$(document).width()<768?(_packeryContainer.packery("fit",a,0,0),$("html, body").animate({scrollTop:0},"slow")):(_packeryContainer.packery(),$("html, body").animate({scrollTop:$(a).position().top-10},500)),window.history.pushState("string",null,"#project/"+$(a).attr("id").split("_")[1])}function closeProject(a){$(a).attr("data-gbnt-checked","false"),$(a).find(".proj-text").show(),$(a).find(".proj-img").show(),$(a).find(".proj-profile").addClass("hide-me"),$(a).removeClass("selected-project"),$(".gbnt-item").each(function(){$(this).removeClass("no-pointers")}),window.history.pushState("string",null,"#")}function doMobileFlashing(){var a=$(window).width();if(768>=a){var b=$("[id^=overlay]");b.each(function(){var a=Math.floor(35*Math.random());a+="s",$(this).addClass("mobile-animation"),$(this).css("-webkit-animation-delay",a),$(this).css("-moz-animation-delay",a),$(this).css("-o-animation-delay",a),$(this).css("animation-delay",a)})}}function createObject(a,b){$.get("projectos/"+a+"/sumario.json",function(a){a.id=this.url.split("/")[1],a.img=a.imagens[Math.floor(Math.random()*a.imagens.length)],a.img_cover=b+".jpg",a.size_class=getSize(),window._projectsList.push(a),checkAllDone(a.id)}).fail(function(){var a=this.url.split("/")[1];checkAllDone(a)})}function createHTML(){var a={project:window._projectsList};$("#gbnt-container").append(window._template(a))}function getSize(){var a=Math.floor(100*Math.random()+1),b="gbnt-size-normal";return a>=0&&a<this._iv_normal&&(b="gbnt-size-normal"),a>=this._iv_normal&&a<this._iv_normal+this._iv_wide&&(b="gbnt-size-wide"),a>=this._iv_normal+this._iv_wide&&a<=this._iv_normal+this._iv_wide+this._iv_tall&&(b="gbnt-size-tall"),b}function randomizeDIVs(){for(var a=$(".gbnt-item"),b=0;b<a.length;b++){var c=Math.floor(Math.random()*a.length-1)+1,d=Math.floor(Math.random()*a.length-1)+1;a.eq(c).before(a.eq(d))}}function initializePackery(){$(".preloader").addClass("hide-me"),_packeryContainer.packery(),_routingProj&&$(".gbnt-item").each(function(){var a=$(this).attr("id").split("_")[1];return _routingProj===a?(_routingProj=null,void openProject(this)):void 0}),_packeryContainer.on("click","[id^=item]",function(){_packeryContainer.packery()})}var _iv_normal=80,_iv_tall=10,_iv_wide=10,_source=$("#gbnt-template").html(),_template=Handlebars.compile(_source),_packeryContainer=$(".packery"),_routingProj=null;$(document).ready(function(){initializeRouting(),prepareProjectData()}),$(window).resize(function(){location.reload()}),Handlebars.registerHelper("getID",function(a,b){var c=a+b;return c}),Handlebars.registerHelper("getCoverImageURL",function(a,b){var c="img/covers/";switch(b){case"gbnt-size-wide":c+="wide/"+a;break;case"gbnt-size-tall":c+="tall/"+a;break;default:c+="normal/"+a}return c});