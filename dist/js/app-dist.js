function applyTranslations(){$(".gbnt-exibithion").text(doTranslation("exibithion")),$(".gbnt-tour").text(doTranslation("tour")),$(".gbnt-about").text(doTranslation("about")),$(".gbnt-language").text(doTranslation("language")),$(".about-text p").text(doTranslation("about_text")),$(".gbnt-language").html("pt"===_mainObject.language?"en":"pt")}function parseURLobject(){try{var url_obj=location.hash.split("#")[1];url_obj&&(url_obj=decodeURIComponent(url_obj),_mainObject=JSON.parse(url_obj))}catch(e){console.log("url is clean")}}function prepareProjectData(){$.get("docs/projectos/lista_dos_projectos.txt",function(data){_projectsList=data.split(","),"1"===_mainObject.tour_id&&(_projectsList=tour1.split(","),_tourInformation=[{tour_title:"tour_title1",tour_description:"tour_description1"}]),"2"===_mainObject.tour_id&&(_projectsList=tour2.split(","),_tourInformation=[{tour_title:"tour_title2",tour_description:"tour_description2"}]),"3"===_mainObject.tour_id&&(_projectsList=tour3.split(","),_tourInformation=[{tour_title:"tour_title3",tour_description:"tour_description3"}]);for(var coverImageCounter=0,i=0;i<_projectsList.length;i++)coverImageCounter+=1,coverImageCounter>10&&(coverImageCounter=1),createObject(_projectsList[i],coverImageCounter)})}function checkAllDone(projID){for(var yesWeAreReady=!0,i=0;i<window._projectsList.length;i++)if(projID===window._projectsList[i]){window._projectsList.splice(i,1);break}for(var ii=0;ii<window._projectsList.length;ii++)if("string"==typeof window._projectsList[ii]){yesWeAreReady=!1;break}yesWeAreReady&&(createHTML(),correctSizes(),randomizeDIVs(),initializePackery(),_mainObject.tour_id&&(openProject($("#item_x")),_packeryContainer.packery()),createEventHandlers(),checkAllImagesAreLoaded())}function checkAllImagesAreLoaded(){var $img=$("img"),totalImg=$img.length-2,waitImgDone=function(){totalImg--,totalImg||$(".preloader").addClass("hide-me")};$("img").each(function(){$(this).load(waitImgDone).error(waitImgDone)})}function correctSizes(){var mainWidth=$(".gbnt-item.gbnt-size-normal").width();$(".gbnt-size-normal").each(function(){$(this).height(mainWidth)}),$(".gbnt-size-wide").each(function(){$(this).height(mainWidth)}),$(".gbnt-size-tall").each(function(){$(this).height(2*mainWidth)})}function createEventHandlers(){$(".proj-cover").hover(function(){"true"===$(this).parents(".gbnt-item").attr("data-gbnt-checked")||$(this).parents(".gbnt-item").hasClass("no-pointers")||$(this).fadeTo(100,0)},function(){"true"!==$(this).parents(".gbnt-item").attr("data-gbnt-checked")&&$(this).fadeTo(100,1)}),$(".proj-text").hover(function(){$(this).parents("#item_x")||$(this).fadeTo(100,1)},function(){$(this).parents("#item_x")||$(this).fadeTo(100,0)}),$(".tours a").on("click",function(e){e.preventDefault(),_mainObject.tour_id=$(this).attr("href");var str=JSON.stringify(_mainObject);location.hash=encodeURIComponent(str),location.reload()}),$(".gbnt-item").on("click",function(e){"btn-view-proj"!==e.target.className&&(e.preventDefault(),$(this).hasClass("no-pointers")||"cover"===event.srcElement.id&&openProject(this))}),$(".proj-profile .btn-close").on("click",function(e){e.preventDefault();var gbntItemDiv=$(this).parents(".gbnt-item");closeProject(gbntItemDiv),_packeryContainer.packery()}),$(".gbnt-language").on("click",function(e){e.preventDefault(),_mainObject.language=$(".gbnt-language").html();var str=JSON.stringify(_mainObject);location.hash=encodeURIComponent(str),location.reload()}),$(".gbnt-exibithion").on("click",function(e){e.preventDefault(),_mainObject.project_id=null,_mainObject.project_id=null;var str=JSON.stringify(_mainObject);location.hash=encodeURIComponent(str),location.reload()}),$(".proj-profile .btn-author").on("click",function(e){e.preventDefault(),$(this).siblings(".btn-project").toggleClass("btn-selected"),$(this).toggleClass("btn-selected"),$(this).parent().siblings(".tab-project").toggle(),$(this).parent().siblings(".tab-author").toggle()}),$(".proj-profile .btn-project").on("click",function(e){e.preventDefault(),$(this).siblings(".btn-author").toggleClass("btn-selected"),$(this).toggleClass("btn-selected"),$(this).parent().siblings(".tab-project").toggle(),$(this).parent().siblings(".tab-author").toggle()}),$("#gbnt-header .gbnt-about").on("click",function(e){e.preventDefault(),"true"===$("#gbnt-header").attr("data-gbnt-open")&&$(".tours").hasClass("hide-me")===!1?($(".about-text").toggleClass("hide-me"),$(".tours").toggleClass("hide-me")):($(".gbnt-about").addClass("no-pointers"),$(".close-header").toggleClass("hide-me"),"false"===$("#gbnt-header").attr("data-gbnt-open")?($("#gbnt-header").attr("data-gbnt-open","true"),$(".about-text").toggleClass("hide-me"),openHeader("gbnt-about",!1)):($("#gbnt-header").attr("data-gbnt-open","false"),$(".about-text").toggleClass("hide-me"),closeHeader("gbnt-about",!1)))}),$("#gbnt-header .gbnt-tour").on("click",function(e){e.preventDefault(),"true"===$("#gbnt-header").attr("data-gbnt-open")&&$(".about-text").hasClass("hide-me")===!1?($(".about-text").toggleClass("hide-me"),$(".tours").toggleClass("hide-me")):($(".gbnt-tour").addClass("no-pointers"),$(".close-header").toggleClass("hide-me"),"false"===$("#gbnt-header").attr("data-gbnt-open")?($("#gbnt-header").attr("data-gbnt-open","true"),$(".tours").toggleClass("hide-me"),openHeader("gbnt-tour",!1)):($("#gbnt-header").attr("data-gbnt-open","false"),$(".tours").toggleClass("hide-me"),closeHeader("gbnt-tour",!1)))}),$("#gbnt-header .toggle-menu").on("click",function(e){e.preventDefault(),$("#gbnt-header .toggle-menu i").hasClass("fa-bars")?($("#gbnt-header .toggle-menu i").removeClass("fa-bars").addClass("fa-times"),$("#gbnt-header .gbnt-tour").addClass("no-pointers"),$("#gbnt-header .gbnt-about").addClass("no-pointers"),openHeader(null,!0),$("#gbnt-header .nav").show()):($("#gbnt-header .toggle-menu i").removeClass("fa-times").addClass("fa-bars"),$("#gbnt-header .gbnt-tour").removeClass("no-pointers"),$("#gbnt-header .gbnt-about").removeClass("no-pointers"),$("#gbnt-header .nav").hide(),closeHeader(null,!0))}),$("#gbnt-header .close-header a").on("click",function(e){e.preventDefault(),$("#gbnt-header").attr("data-gbnt-open","false"),$(".tours").addClass("hide-me"),$(".about-text").addClass("hide-me"),$(".close-header").addClass("hide-me"),closeHeader("gbnt-tour",!1)}),$(document).keyup(function(e){27===e.keyCode&&$(".gbnt-item").each(function(){return"true"===$(this).attr("data-gbnt-checked")?(closeProject(this),void _packeryContainer.packery()):void 0})})}function openHeader(selectedMenuClass,isMobile){var size="400px",ease="swing",dur=200;isMobile&&(size="950px",ease="swing",dur=200),$("#gbnt-header").animate({height:size},{duration:dur,easing:ease,complete:function(){$("."+selectedMenuClass).removeClass("no-pointers")}}),isMobile||$("#gbnt-container").animate({"margin-top":"320px"},{duration:dur,easing:ease})}function closeHeader(selectedMenuClass,isMobile){var ease="swing",dur=200;isMobile&&(ease="swing",dur=200),$("#gbnt-header").animate({height:"80px"},{duration:dur,easing:ease,complete:function(){$("."+selectedMenuClass).removeClass("no-pointers")}}),isMobile||$("#gbnt-container").animate({"margin-top":"0px"},{duration:dur,easing:ease})}function getUrlParameter(sParam){for(var sPageURL=window.location.search.substring(1),sURLVariables=sPageURL.split("&"),i=0;i<sURLVariables.length;i++){var sParameterName=sURLVariables[i].split("=");if(sParameterName[0]==sParam)return sParameterName[1]}}function openProject(gbntItem){var mainWidth=$(gbntItem).width();$(gbntItem).attr("data-gbnt-checked","true"),$(gbntItem).attr("data-gbnt-previous-height",$(gbntItem).height()),$(".gbnt-item").each(function(){$(this).addClass("no-pointers")}),$(gbntItem).find(".proj-cover").hide(),$(gbntItem).find(".proj-text").hide(),$(gbntItem).find(".proj-img").hide(),$(gbntItem).addClass("selected-project"),$(gbntItem).height(4*mainWidth),$(gbntItem).find(".proj-profile").removeClass("hide-me"),$(document).width()<768?(_packeryContainer.packery("fit",gbntItem,0,0),$("html, body").animate({scrollTop:0},"slow")):(_packeryContainer.packery("fit",gbntItem),$("html, body").animate({scrollTop:$(gbntItem).position().top-10},500)),_mainObject.project_id=parseInt($(gbntItem).attr("id").split("_")[1]);var str=JSON.stringify(_mainObject);location.hash=encodeURIComponent(str)}function closeProject(gbntItem){$(gbntItem).attr("data-gbnt-checked","false"),$(gbntItem).height($(gbntItem).attr("data-gbnt-previous-height")),$(gbntItem).find(".proj-text").show(),$(gbntItem).find(".proj-img").show(),$(gbntItem).find(".proj-profile").addClass("hide-me"),$(gbntItem).removeClass("selected-project"),$(".gbnt-item").each(function(){$(this).removeClass("no-pointers")}),_mainObject.project_id=null;var str=JSON.stringify(_mainObject);location.hash=encodeURIComponent(str)}function doMobileFlashing(){var screenSize=$(window).width();if(768>=screenSize){var arr=$("[id^=overlay]");arr.each(function(){var rnd=Math.floor(35*Math.random());rnd+="s",$(this).addClass("mobile-animation"),$(this).css("-webkit-animation-delay",rnd),$(this).css("-moz-animation-delay",rnd),$(this).css("-o-animation-delay",rnd),$(this).css("animation-delay",rnd)})}}function createObject(projectID,coverID){$.get("docs/projectos/"+projectID+"/sumario.json",function(singleProject){singleProject.id=this.url.split("/")[2],singleProject.img=singleProject.imagens[Math.floor(Math.random()*singleProject.imagens.length)],singleProject.img_cover=coverID+".jpg",singleProject.size_class=getSize(),window._projectsList.push(singleProject),checkAllDone(singleProject.id)}).fail(function(){var tmpID=this.url.split("/")[1];checkAllDone(tmpID)})}function createHTML(){var data={tour:_tourInformation,project:window._projectsList};$("#gbnt-container").append(window._template(data))}function getSize(){var rnd=Math.floor(100*Math.random()+1),boxSize="gbnt-size-normal";return rnd>=0&&rnd<this._iv_normal&&(boxSize="gbnt-size-normal"),rnd>=this._iv_normal&&rnd<this._iv_normal+this._iv_wide&&(boxSize="gbnt-size-wide"),rnd>=this._iv_normal+this._iv_wide&&rnd<=this._iv_normal+this._iv_wide+this._iv_tall&&(boxSize="gbnt-size-tall"),boxSize}function doTranslation(id){return"pt"===_mainObject.language?translations[id][0]:translations[id][1]}function randomizeDIVs(){for(var cards=$(".gbnt-item"),i=0;i<cards.length;i++){var target=Math.floor(Math.random()*cards.length-1)+1,target2=Math.floor(Math.random()*cards.length-1)+1;cards.eq(target).before(cards.eq(target2))}$("#item_x").prependTo("#gbnt-container")}function initializePackery(){_packeryContainer.packery(),_mainObject.project_id&&$(".gbnt-item").each(function(){var theId=$(this).attr("id").split("_")[1];return _mainObject.project_id===parseInt(theId)?void openProject(this):void 0})}var _iv_normal=80,_iv_tall=10,_iv_wide=10,_source=$("#gbnt-template").html(),_template=Handlebars.compile(_source),_packeryContainer=$(".packery"),_mainObject={language:"pt",project_id:null,tour_id:null},tour1="1,4,8,12,16,20,24,28,32,36",tour2="6,13,17,25,29,33,37",tour3="26,30,34,38",_tourInformation=null;$(document).ready(function(){parseURLobject(),prepareProjectData(),applyTranslations()}),$(window).resize(function(){}),Handlebars.registerHelper("getID",function(str,projectID){var val=str+projectID;return val}),Handlebars.registerHelper("getCoverImageURL",function(pictureID,sizeClass){var url="img/covers/";switch(sizeClass){case"gbnt-size-wide":url+="wide/"+pictureID;break;case"gbnt-size-tall":url+="tall/"+pictureID;break;default:url+="normal/"+pictureID}return url}),Handlebars.registerHelper("translateThis",function(id){var text=doTranslation(id);return text});
