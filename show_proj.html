<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/slick/slick.css" />
    <link rel="stylesheet" href="css/slick/slick-theme.css" />
    <link rel="stylesheet" href="css/app.dist.css" />
    <title>unplace.org // GBNT v3.0</title>
</head>

<body class="body-color">
    <script id="gbnt-template" type="text/x-handlebars-template">
        <div class="slick-content">
            {{#each images}}
            <div>
                <div class="label"><span class="auth">{{author}}</span>-<span class="title">{{title}}</span>-<span class="year">{{year}}</span> <span class="index">{{index}}/{{total}}</span>
                </div>
                <img src="{{img}}" />
            </div>
            {{/each}}
        </div>
    </script>
    <section id="gbnt-header" data-gbnt-open="false">
        <div class="logo">
            <a href="http://www.unplace.org">
                <img src="img/logo.jpg">
            </a>
        </div>
    </section>
    <section id="gbnt-project">
    </section>
    <script type="text/javascript" src="js/libs.dist.js"></script>
    <script type="text/javascript">
    var _source = $("#gbnt-template").html();
    var _template = Handlebars.compile(_source);

    $(document).ready(function() {
        var url_data = getParameterByName("data");
        url_data = decodeURIComponent(url_data);
        var project = JSON.parse(url_data);
        var projs = [];

        for (var i = 0; i < project.imagens.length; i++) {
            var obj = {};
            obj.index = i + 1;
            obj.img = "docs/projectos/" + project.id + "/" + project.imagens[i];
            obj.author = project.autor;
            obj.title = project.titulo;
            obj.year = project.ano;
            obj.total = project.imagens.length;
            projs.push(obj);
        }

        var data = {
            images: projs
        };

        $('#gbnt-project').append(window._template(data));
        $('.slick-content').slick();
    });


    function getParameterByName(name) {
        name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
        var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
            results = regex.exec(location.search);
        return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
    }

    Handlebars.registerHelper('getCoverImage', function(img) {
        var str = "background-image: url(" + img + ");";
        return str;
    });

    Handlebars.registerHelper('getID', function(str, projectID) {
        var val = str + projectID;
        return val;
    });
    </script>
</body>

</html>
